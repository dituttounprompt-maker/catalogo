
<!DOCTYPE html>
<html lang="it">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Listino Osterie — Caselle ordinate + Ricerca</title>
<style>
:root {
  --brand: #128C5D;
  --bg: #f7f7f8;
  --card: rgba(255,255,255,0.82);
  --text: #111;
  --muted: #6b7280;
  --border: rgba(0,0,0,0.07);
}
* { box-sizing: border-box; }
body { margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background: var(--bg); color: var(--text); }
header {
  position: sticky; top: 0; z-index: 5;
  backdrop-filter: saturate(120%) blur(8px);
  background: linear-gradient(180deg, rgba(247,247,248,0.96), rgba(247,247,248,0.6));
  border-bottom: 1px solid var(--border);
}
.container { max-width: 1200px; margin: 0 auto; padding: 12px; }
.h1 { font-size: 20px; font-weight: 800; letter-spacing: .2px; margin: 2px 0 0 0; }
.subtitle { margin: 0; font-size: 12px; color: var(--muted); line-height: 1.2; }
.toolbar { display: grid; grid-template-columns: 1fr auto auto; gap: 8px; margin-top: 10px; }
input[type="search"] {
  padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border);
  outline: none; font-size: 14px; color: var(--brand);
  background: #fff;
}
select {
  padding: 10px 12px; border-radius: 10px; border: 1px solid var(--border); background: #fff; font-size: 14px;
}
.badge {
  align-self: center; font-size: 12px; padding: 6px 10px; border-radius: 999px;
  color: #fff; background: var(--brand); font-weight: 700; justify-self: end;
}
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(200px,1fr));
  gap: 10px;
  padding: 12px;
}
.card {
  display: grid; grid-template-rows: auto 1fr auto;
  background: var(--card); border: 1px solid var(--border); border-radius: 12px; padding: 12px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.04); min-height: 110px;
}
.card .title { font-size: 14px; font-weight: 800; margin: 0; }
.card .meta { margin: 6px 0 0 0; font-size: 12px; color: var(--muted); }
.row-bottom { display: grid; grid-template-columns: 1fr auto; align-items: end; margin-top: 8px; }
.unit { font-size: 12px; color: var(--muted); }
.price { font-size: 15px; font-weight: 900; }
footer { text-align: center; color: var(--muted); font-size: 11px; padding: 8px 0 18px; }
</style>
</head>
<body>
<header>
  <div class="container">
    <h1 class="h1">Listino Osterie</h1>
    <p class="subtitle">Caselle ordinate • Ricerca istantanea • Prezzo in basso a destra</p>
    <div class="toolbar">
      <input id="q" type="search" placeholder="Cerca prodotto, confezione o unità…" autofocus>
      <select id="sort">
        <option value="name_asc">Nome A→Z</option>
        <option value="name_desc">Nome Z→A</option>
        <option value="price_asc">Prezzo ↑</option>
        <option value="price_desc" selected>Prezzo ↓</option>
      </select>
      <span class="badge"><span id="count">0</span> / <span id="total">0</span></span>
    </div>
  </div>
</header>

<main class="container">
  <section id="grid" class="grid"></section>
</main>

<footer>Generato da Excel</footer>

<script>
const DATA = [{"prodotto": "FILETTO DI ALICI   S/O x 720gr ALBATROS", "confezione": "sfusi", "unita": "NR", "prezzo": 12.5}, {"prodotto": "FILETTO DI ALICI   S/O x 720gr CORALLO", "confezione": "sfusi", "unita": "NR", "prezzo": 11.6}, {"prodotto": "ALICI FIL.(PEZZI)   S/O x 720gr", "confezione": "sfusi", "unita": "NR", "prezzo": 9.5}, {"prodotto": "ALICI DEL CANTABRICO GR. 48", "confezione": "sfusi", "unita": "NR", "prezzo": 2.8}, {"prodotto": "FILETTO DI ARINGA DA GR. 100", "confezione": "sfusi", "unita": "NR", "prezzo": 1.8}, {"prodotto": "FILETTO DI SGOMBRO AL PEPE DA 200 G", "confezione": "sfusi", "unita": "NR", "prezzo": 5.4}, {"prodotto": "ALICI MARINATE  x 1Kg", "confezione": "sfusi", "unita": "NR", "prezzo": 12.2}, {"prodotto": "BOCCONCINI ALICI OLIVA E PEPER.conf.da 1kg.", "confezione": "sfusi", "unita": "NR", "prezzo": 13.7}, {"prodotto": "BOTTARGA DI MUGGINE", "confezione": "sfusi", "unita": "KG", "prezzo": 72.0}, {"prodotto": "BOTTARGA DI TONNO", "confezione": "sfusi", "unita": "KG", "prezzo": 79.0}, {"prodotto": "COLATURA DI ALICI DA 100 ML.", "confezione": "sfusi", "unita": "NR", "prezzo": 6.2}, {"prodotto": "CREMA DI DENTICE IN VASCHETTA DA 500 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 15.8}, {"prodotto": "CREMA DI DENTICE IN VASCHETTA DA 200 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 7.5}, {"prodotto": "SARDE IN SAOR IN VASCHETTA DA 800 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 11.0}, {"prodotto": "SALMONE AFF.TO BUSTE x 200gr", "confezione": "sfusi", "unita": "NR", "prezzo": 6.5}, {"prodotto": "SALMONE AFF.TO PREAFF.NORVEGIA", "confezione": "sfusi", "unita": "KG", "prezzo": 22.5}, {"prodotto": "STOCCAFISSO WM 800/1000", "confezione": "sfusi", "unita": "KG", "prezzo": 43.0}, {"prodotto": "NERO DI SEPPIA IN VASO DA gr.500", "confezione": "sfusi", "unita": "NR", "prezzo": 10.2}, {"prodotto": "POLPA DI RICCIO MARE X 90 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 8.5}, {"prodotto": "POLPA DI RICCIO MARE X 70 gr. SMERALDA", "confezione": "sfusi", "unita": "NR", "prezzo": 11.0}, {"prodotto": "POLPA DI GRANCHIO X 170 gr. SMERALDA", "confezione": "sfusi", "unita": "NR", "prezzo": 8.0}, {"prodotto": "PESCE SPADA TRANCI FUME'", "confezione": "sfusi", "unita": "KG", "prezzo": 36.5}, {"prodotto": "UOVA DI SALMONE X 50 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 10.3}, {"prodotto": "UOVA DI LOMPO X 50 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 2.8}, {"prodotto": "UOVA DI ARINGA X 55 gr.", "confezione": "sfusi", "unita": "NR", "prezzo": 10.5}, {"prodotto": "TONNO \"CORALLO\" IN O.GIRASOLE x 1730gr", "confezione": "sfusi", "unita": "NR", "prezzo": 10.6}, {"prodotto": "TONNO IN BUSTA O.GIRASOLE x 1 KG.", "confezione": "sfusi", "unita": "NR", "prezzo": 7.5}, {"prodotto": "TONNO  TRANCI FUME'", "confezione": "sfusi", "unita": "KG", "prezzo": 27.5}, {"prodotto": "BACCALA' MANTECATO  (gluten free)", "confezione": "sfusi", "unita": "NR", "prezzo": 24.0}, {"prodotto": "BACCALA' MANTECATO 35%", "confezione": "sfusi", "unita": "NR.", "prezzo": 17.5}, {"prodotto": "BACCALA' MANTECATO 45%", "confezione": "sfusi", "unita": "NR.", "prezzo": 19.8}, {"prodotto": "BACCALA' VICENTINA  *", "confezione": "sfusi", "unita": "NR", "prezzo": 25.5}, {"prodotto": "BACCALA' CONDITO    *", "confezione": "sfusi", "unita": "NR", "prezzo": 27.5}, {"prodotto": "BACCALA' IN UMIDO   *", "confezione": "sfusi", "unita": "NR", "prezzo": 27.0}, {"prodotto": "ANELLI DI CIPOLLA PASTELLATI  PREFRITTI", "confezione": "8X0,400", "unita": "KG", "prezzo": 5.2}, {"prodotto": "ARANCINI C/MOZZARELLA E PROSCIUTTO PREFR.", "confezione": "3", "unita": "KG", "prezzo": 5.5}, {"prodotto": "ARANCINI AGLI SPINACI PREFRITTI", "confezione": "3", "unita": "KG", "prezzo": 5.5}, {"prodotto": "ARROSTICINI DI MARE PANATI (totano gigas)", "confezione": "4", "unita": "KG", "prezzo": 8.3}, {"prodotto": "ALICI PANATE CROCCANTI", "confezione": "1", "unita": "KG", "prezzo": 8.9}, {"prodotto": "FILETTO DI BACCALA' PASTELLATO C/PREZZEM.", "confezione": "5X1", "unita": "KG", "prezzo": 11.9}, {"prodotto": "CHELE DI GRANCHIO PANATE", "confezione": "4X1", "unita": "KG", "prezzo": 5.5}, {"prodotto": "FIORI DI ZUCCA C/MOZZAR.E ALICI  PREFRITTI", "confezione": "5X1", "unita": "KG", "prezzo": 9.3}, {"prodotto": "FIORI DI ZUCCA C/PROSCIUTTO E MOZZAR  PREFR.", "confezione": "5X2", "unita": "KG", "prezzo": 8.1}, {"prodotto": "FIORI DI ZUCCA PASTELLATI PREFRITTI", "confezione": "4X1", "unita": "KG", "prezzo": 11.5}, {"prodotto": "FRITTELLE GAMBERI E ZUCCHINE", "confezione": "4X1", "unita": "KG", "prezzo": 11.5}, {"prodotto": "GAMBERI AVVOLTI  IN FILO DI PATATA", "confezione": "5X1", "unita": "KG", "prezzo": 14.0}, {"prodotto": "MOZZARELLINE PANATE CON TARTUFO PREFRITTE", "confezione": "5X1", "unita": "KG", "prezzo": 7.8}, {"prodotto": "MOZZARELLINE PANATE PREFRITTE", "confezione": "5X1", "unita": "KG", "prezzo": 6.5}, {"prodotto": "OLIVE ASCOLANE", "confezione": "4X2,500", "unita": "KG", "prezzo": 5.4}, {"prodotto": "OLIVE ASCOLANE PREFRITTE", "confezione": "5X1", "unita": "KG", "prezzo": 5.9}, {"prodotto": "PANZEROTTI MOZZARELLA  POMODORO PREFR.", "confezione": "5X1", "unita": "KG", "prezzo": 5.4}, {"prodotto": "PIZZETTE DI PASTA SFOGLIA", "confezione": "4x1", "unita": "KG", "prezzo": 5.5}, {"prodotto": "POLPETTE MELANZ.MOZZ.PROVOLA AFFUMIC.", "confezione": "5X1", "unita": "KG", "prezzo": 5.5}, {"prodotto": "SALATINI 7 GUSTI", "confezione": "4X1", "unita": "KG", "prezzo": 5.5}, {"prodotto": "SALVIA PASTELLATA PREFRITTA", "confezione": "4X1", "unita": "KG", "prezzo": 11.5}, {"prodotto": "TRIS DI VERDURE PASTELLATE PREFRITTE", "confezione": "5X1", "unita": "KG", "prezzo": 5.2}, {"prodotto": "GAMBERI SGUSCIATI PREC.CONG.", "confezione": "4x2,250", "unita": "KG", "prezzo": 14.9}, {"prodotto": "POLPA DI GRANCHIO PRECOTTA IN PIASTINA DA GR. 380", "confezione": "1x0,380", "unita": "CONF.", "prezzo": 11.8}, {"prodotto": "TARTARE DI GAMBERO ROSSO DA GR. 80 S/V", "confezione": "sfuso", "unita": "CONF.", "prezzo": 6.5}, {"prodotto": "POLPETTE DI BRASATO", "confezione": "2", "unita": "KG", "prezzo": 14.0}, {"prodotto": "POLPETTE DI BACCALA'", "confezione": "2", "unita": "KG", "prezzo": 14.0}, {"prodotto": "POLPETTE DI TONNO E CIPOLLA", "confezione": "2", "unita": "KG", "prezzo": 14.0}, {"prodotto": "POLPETTE DI POLLO E SPECK", "confezione": "2", "unita": "KG", "prezzo": 12.0}, {"prodotto": "POLPETTE DI VERDURE", "confezione": "2", "unita": "KG", "prezzo": 12.0}];

const grid = document.getElementById('grid');
const q = document.getElementById('q');
const sortSel = document.getElementById('sort');
const count = document.getElementById('count');
const total = document.getElementById('total');
total.textContent = DATA.length;

function fmtPrice(v){ return isFinite(v) ? v.toFixed(2).replace('.', ',') + ' €' : ''; }

function cardTemplate(item){
  const unit = item.unita ? item.unita : '';
  const conf = item.confezione ? item.confezione : '';
  return `
  <article class="card">
    <div>
      <h3 class="title">${item.prodotto}</h3>
      <p class="meta">${conf}${unit ? ' · ' + unit : ''}</p>
    </div>
    <div></div>
    <div class="row-bottom">
      <span class="unit">${unit}</span>
      <span class="price">${fmtPrice(item.prezzo)}</span>
    </div>
  </article>`;
}

function sortList(list, mode){
  const arr = [...list];
  switch(mode){
    case 'name_asc': return arr.sort((a,b)=>a.prodotto.localeCompare(b.prodotto, 'it'));
    case 'name_desc': return arr.sort((a,b)=>b.prodotto.localeCompare(a.prodotto, 'it'));
    case 'price_asc': return arr.sort((a,b)=>a.prezzo - b.prezzo);
    case 'price_desc': return arr.sort((a,b)=>b.prezzo - a.prezzo);
    default: return arr;
  }
}

function render(list){
  grid.innerHTML = list.map(cardTemplate).join('');
  count.textContent = list.length;
}

function filterAndRender(){
  const term = q.value.trim().toLowerCase();
  const mode = sortSel.value;
  let out = DATA;
  if(term){
    const parts = term.split(/\s+/g);
    out = DATA.filter(it=>{
      const hay = (it.prodotto + ' ' + (it.confezione||'') + ' ' + (it.unita||'')).toLowerCase();
      return parts.every(p => hay.includes(p));
    });
  }
  out = sortList(out, mode);
  render(out);
}

q.addEventListener('input', filterAndRender);
sortSel.addEventListener('change', filterAndRender);

// default render
sortSel.value = 'price_desc';
filterAndRender();
</script>
</body>
</html>
