<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catalogo Prodotti ZANON SEAFISH</title>
  <meta property="og:title" content="Catalogo Prodotti ZANON SEAFISH">
  <meta property="og:description" content="Sfoglia il catalogo prodotti Zanon Seafish Ingros SRL">
  <meta property="og:url" content="https://zanonseafish.github.io/catalogo/">
  <meta property="og:type" content="website">
  <meta property="og:image" content="https://zanonseafish.github.io/catalogo/images/og-cover1.jpg">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta name="twitter:card" content="summary_large_image">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{--bg:#fbfbf8;--ink:#111;--muted:#606060;--line:#e7e4dc;--brand:#0b5;--price:#0a6a2b}
    *{box-sizing:border-box}
    html,body{height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}
    header{background:linear-gradient(180deg,#0b1620 0%,#0e1f2a 60%,#0e1f2a00 100%);color:#fff;padding:20px 12px 18px;text-align:center;position:relative}
    header .top{display:flex;flex-direction:column;align-items:center;gap:8px;max-width:1100px;margin:0 auto}
    header img.logo{height:60px;width:auto;display:block;margin:0 auto}
    header h1{font-family:"Playfair Display",serif;font-weight:600;letter-spacing:.02em;margin:0 0 2px 0;font-size:24px;line-height:1.15;word-break:break-word;overflow-wrap:anywhere}
    header .sub{opacity:.85;font-size:11.5px;margin-top:0}
    .tools{display:flex;justify-content:center;gap:8px;margin-top:8px;width:100%;max-width:600px}
    .search{flex-grow:1;max-width:480px}
    .search input{width:100%;padding:10px 14px;border-radius:999px;border:1px solid #ffffff40;background:#ffffff12;color:var(--brand);outline:none;font-size:14px}
    .sort-btn{padding:10px 16px;border-radius:999px;border:1px solid #ffffff40;background:#ffffff12;color:#fff;cursor:pointer;font-size:14px;white-space:nowrap}
    .sort-btn:hover{background:#ffffff22}
    .count{color:var(--brand);margin-top:8px;font-size:12px}
    .container{max-width:1100px;margin:6px auto 14px;padding:0 10px}
    .list{display:flex;flex-direction:column;gap:18px}
    .category-header{font-family:"Playfair Display",serif;font-size:22px;color:var(--ink);border-bottom:2px solid var(--line);padding-bottom:6px;margin:0 0 12px 0}
    .items-container{display:flex;flex-direction:column;gap:10px}
    .item{display:flex;align-items:center;gap:12px;background:rgba(255,255,255,.92);border:1px solid var(--line);border-radius:10px;padding:10px 12px;box-shadow:0 1px 6px rgba(0,0,0,.06);cursor:pointer;transition:transform .15s ease-out,box-shadow .15s ease-out}
    .item:hover{transform:scale(1.02);box-shadow:0 4px 12px rgba(0,0,0,.08)}
    .item:active{transform:scale(.99);transition-duration:.05s}
    .item-image{width:1.2em;height:1.2em;flex-shrink:0}
    .info{flex-grow:1;min-width:0}
    .title{font-family:Inter,sans-serif;font-weight:600;font-size:16px;margin:0 0 2px 0;text-transform:uppercase}
    .desc{color:var(--muted);font-size:12px;line-height:1.3;margin:0}
    .price{color:var(--price);font-weight:700;font-size:16px;white-space:nowrap}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:1000}
    .modal.open{display:flex}
    .modal-content{background:#fff;border-radius:12px;max-width:860px;width:min(96vw,860px);padding:20px;position:relative;max-height:90vh;overflow:hidden;box-shadow:0 10px 24px rgba(0,0,0,.35);display:flex;flex-direction:column}
    .m-title{font-family:"Playfair Display",serif;margin:0 0 10px 0}
    .modal-footer{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:12px;flex:0 0 auto}
    .share-small{border:none;border-radius:18px;padding:8px 12px;font-size:.9rem;cursor:pointer;background:#111;color:#fff;box-shadow:0 4px 10px rgba(0,0,0,.3)}
    .close-btn{border:none;border-radius:18px;padding:8px 12px;font-size:.9rem;cursor:pointer;background:#eee;color:#111;box-shadow:0 2px 6px rgba(0,0,0,.15)}
    #mGallery{flex:1 1 auto;overflow:auto;display:grid;gap:12px;align-items:center;justify-items:center}
    #mGallery:has(img:nth-child(2)){grid-template-columns:1fr 1fr}
    #mGallery img{max-width:100%;height:auto;display:block;object-fit:contain}
    .site-footer{max-width:1100px;margin:18px auto 24px;padding:0 10px;color:#444;font-size:12px}
    .site-rule{border:none;height:1px;background:#e5e2da;margin:6px 0 10px}
    .site-footer-inner{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .footer-logo{height:20px;width:auto}
    .foot-text{flex:1;min-width:240px}
    .foot-mail{font-size:12px;color:#0b5;text-decoration:none}
    @media (max-width:820px){header{padding:16px 10px 16px}header h1{font-size:22px}.title{font-size:15px}.price{font-size:15px}}
    @media (max-width:560px){header{padding:14px 8px 14px}header h1{font-size:20px}.item{flex-wrap:wrap;row-gap:4px}.info{width:100%;order:1;flex-basis:calc(100% - 1.2em - 12px)}.price{order:2;margin-left:auto;padding-left:12px}.item-image{order:0}}
    @media print{body{background:#fff}header{background:none!important;color:#000!important;border-bottom:1px solid #ddd!important;padding:0 0 6mm}.sub,.tools,#count,.item-image{display:none!important}.category,.item{break-inside:avoid-page;page-break-inside:avoid}.item{box-shadow:none;border-color:#ddd}.modal{display:none!important}.site-rule{background:#000;height:1px}.site-footer{color:#000}.foot-mail{color:#000;text-decoration:underline}}
    .search input::placeholder{color:rgba(11,85,0,.7)}
    .print-footer{display:none!important}
    @media print{.print-footer{display:block!important;position:fixed;bottom:0;left:0;right:0;width:100%;text-align:center;font-size:10px;color:#000;opacity:.95}.print-footer .line{display:inline-flex;align-items:center;gap:6px}.print-footer img{height:12px;width:auto;vertical-align:middle}.print-footer .text{font-weight:600}}
  </style>
</head>
<body>
  <header>
    <div class="top">
      <img class="logo" src="images/logo.png" alt="Zanon Seafish Ingros SRL" onerror="this.style.display='none'">
      <h1>Catalogo Prodotti ZANON SEAFISH</h1>
      <div class="sub">Clicca un elemento per i dettagli e la condivisione.</div>
      <div class="tools">
        <div class="search"><input id="searchBox" placeholder="Cerca prodotti‚Ä¶"></div>
        <button id="sortBtn" class="sort-btn">Ordina</button>
      </div>
      <div id="count" class="count"></div>
    </div>
  </header>
  <div class="print-footer" aria-hidden="true">
    <span class="line">
      <img src="images/logo.png" alt="Zanon Seafish" onerror="this.style.display='none'">
      <span class="text">Zanon Seafish ‚Äì Catalogo Prodotti</span>
    </span>
  </div>
  <div class="container"><div id="list" class="list"></div></div>
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content" aria-labelledby="mTitle">
      <h2 id="mTitle" class="m-title"></h2>
      <div id="mGallery"></div>
      <p id="mDesc" class="desc"></p>
      <p id="mFullDesc"></p>
      <p id="mPrice" class="price" style="margin-top:0"></p>
      <div class="modal-footer">
        <button id="shareBtn" class="share-small" title="Condividi" aria-label="Condividi">üì§ Condividi</button>
        <button id="closeBtn" class="close-btn" aria-label="Chiudi">Chiudi</button>
      </div>
    </div>
  </div>
  <footer class="site-footer">
    <hr class="site-rule">
    <div class="site-footer-inner">
      <img src="images/logo.png" alt="Zanon Seafish Ingros SRL" class="footer-logo" onerror="this.style.display='none'">
      <div class="foot-text">
        <strong>Zanon Seafish Ingros SRL</strong> ¬∑ P.IVA IT01654690278 ¬∑
        Sede legale: S. Croce 491, 30135 Venezia (VE) ¬∑
        Sede amm. e magazzini: Via Colombara 115/A, 30176 Marghera (VE) ¬∑
        Tel: 041 5382830 ¬∑ 041 3963095 ¬∑
        <a href="https://www.zanonseafish.it/" target="_blank" rel="noopener">www.zanonseafish.it</a> ¬∑
        <a href="mailto:info@zanonseafish.it">info@zanonseafish.it</a>
      </div>
      <a class="foot-mail" href="mailto:info@zanonseafish.it" title="Scrivi a info@zanonseafish.it">‚úâÔ∏è Contattaci</a>
    </div>
  </footer>
  <script>
    
  const ALL_PRODUCTS = [
  {
    "id": "0-filetto-di-alici-so-x-720gr-albatros",
    "name": "FILETTO DI ALICI   S/O x 720gr ALBATROS",
    "price": 12.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "1-filetto-di-alici-so-x-720gr-corallo",
    "name": "FILETTO DI ALICI   S/O x 720gr CORALLO",
    "price": 11.6,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "2-alici-filpezzi-so-x-720gr",
    "name": "ALICI FIL.(PEZZI)   S/O x 720gr",
    "price": 9.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "3-alici-del-cantabrico-gr-48",
    "name": "ALICI DEL CANTABRICO GR. 48",
    "price": 2.8,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "4-filetto-di-aringa-da-gr-100",
    "name": "FILETTO DI ARINGA DA GR. 100",
    "price": 1.8,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "5-filetto-di-sgombro-al-pepe-da-200-g",
    "name": "FILETTO DI SGOMBRO AL PEPE DA 200 G",
    "price": 5.4,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "6-alici-marinate-x-1kg",
    "name": "ALICI MARINATE  x 1Kg",
    "price": 12.2,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "7-bocconcini-alici-oliva-e-peperconfda-1kg",
    "name": "BOCCONCINI ALICI OLIVA E PEPER.conf.da 1kg.",
    "price": 13.7,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "8-bottarga-di-muggine",
    "name": "BOTTARGA DI MUGGINE",
    "price": 72,
    "unit": "KG",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "9-bottarga-di-tonno",
    "name": "BOTTARGA DI TONNO",
    "price": 79,
    "unit": "KG",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "10-colatura-di-alici-da-100-ml",
    "name": "COLATURA DI ALICI DA 100 ML.",
    "price": 6.2,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "11-crema-di-dentice-in-vaschetta-da-500-gr",
    "name": "CREMA DI DENTICE IN VASCHETTA DA 500 gr.",
    "price": 15.8,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "12-crema-di-dentice-in-vaschetta-da-200-gr",
    "name": "CREMA DI DENTICE IN VASCHETTA DA 200 gr.",
    "price": 7.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "13-sarde-in-saor-in-vaschetta-da-800-gr",
    "name": "SARDE IN SAOR IN VASCHETTA DA 800 gr.",
    "price": 11,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "14-salmone-affto-buste-x-200gr",
    "name": "SALMONE AFF.TO BUSTE x 200gr",
    "price": 6.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "15-salmone-affto-preaffnorvegia",
    "name": "SALMONE AFF.TO PREAFF.NORVEGIA",
    "price": 22.5,
    "unit": "KG",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "16-stoccafisso-wm-8001000",
    "name": "STOCCAFISSO WM 800/1000",
    "price": 43,
    "unit": "KG",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "17-nero-di-seppia-in-vaso-da-gr500",
    "name": "NERO DI SEPPIA IN VASO DA gr.500",
    "price": 10.2,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "18-polpa-di-riccio-mare-x-90-gr",
    "name": "POLPA DI RICCIO MARE X 90 gr.",
    "price": 8.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "19-polpa-di-riccio-mare-x-70-gr-smeralda",
    "name": "POLPA DI RICCIO MARE X 70 gr. SMERALDA",
    "price": 11,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "20-polpa-di-granchio-x-170-gr-smeralda",
    "name": "POLPA DI GRANCHIO X 170 gr. SMERALDA",
    "price": 8,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "21-pesce-spada-tranci-fume",
    "name": "PESCE SPADA TRANCI FUME'",
    "price": 36.5,
    "unit": "KG",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "22-uova-di-salmone-x-50-gr",
    "name": "UOVA DI SALMONE X 50 gr.",
    "price": 10.3,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "23-uova-di-lompo-x-50-gr",
    "name": "UOVA DI LOMPO X 50 gr.",
    "price": 2.8,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "24-uova-di-aringa-x-55-gr",
    "name": "UOVA DI ARINGA X 55 gr.",
    "price": 10.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "25-tonno-corallo-in-ogirasole-x-1730gr",
    "name": "TONNO \"CORALLO\" IN O.GIRASOLE x 1730gr",
    "price": 10.6,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "26-tonno-in-busta-ogirasole-x-1-kg",
    "name": "TONNO IN BUSTA O.GIRASOLE x 1 KG.",
    "price": 7.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "27-tonno-tranci-fume",
    "name": "TONNO  TRANCI FUME'",
    "price": 27.5,
    "unit": "KG",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "28-baccala-mantecato-gluten-free-vaschetta-da-1-kg",
    "name": "BACCALA' MANTECATO  (gluten free) (Vaschetta           da 1 kg.)",
    "price": 24,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "29-baccala-mantecato-gluten-free-200g",
    "name": "BACCALA' MANTECATO  (gluten free) (200g)",
    "price": 5.9,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "30-baccala-mantecato-35-vaschetta-da-1-kg",
    "name": "BACCALA' MANTECATO 35% (Vaschetta           da 1 kg.)",
    "price": 17.5,
    "unit": "NR.",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "31-baccala-mantecato-35-200g",
    "name": "BACCALA' MANTECATO 35% (200g)",
    "price": 3.8,
    "unit": "NR.",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "32-baccala-mantecato-45-vaschetta-da-1-kg",
    "name": "BACCALA' MANTECATO 45% (Vaschetta           da 1 kg.)",
    "price": 19.8,
    "unit": "NR.",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "33-baccala-mantecato-45-200g",
    "name": "BACCALA' MANTECATO 45% (200g)",
    "price": 4.2,
    "unit": "NR.",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "34-baccala-vicentina-vaschetta-da-1-kg",
    "name": "BACCALA' VICENTINA  * (Vaschetta           da 1 kg.)",
    "price": 25.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "35-baccala-vicentina-200g",
    "name": "BACCALA' VICENTINA  * (200g)",
    "price": 6.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "36-baccala-condito-vaschetta-da-1-kg",
    "name": "BACCALA' CONDITO    * (Vaschetta           da 1 kg.)",
    "price": 27.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "37-baccala-condito-200g",
    "name": "BACCALA' CONDITO    * (200g)",
    "price": 6.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "38-baccala-in-umido-vaschetta-da-1-kg",
    "name": "BACCALA' IN UMIDO   * (Vaschetta           da 1 kg.)",
    "price": 27,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "39-baccala-in-umido-200g",
    "name": "BACCALA' IN UMIDO   * (200g)",
    "price": 5.5,
    "unit": "NR",
    "shortDesc": "sfusi",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "40-anelli-di-cipolla-pastellati-prefritti",
    "name": "ANELLI DI CIPOLLA PASTELLATI  PREFRITTI",
    "price": 5.2,
    "unit": "KG",
    "shortDesc": "8X0,400",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "41-arancini-cmozzarella-e-prosciutto-prefr",
    "name": "ARANCINI C/MOZZARELLA E PROSCIUTTO PREFR.",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "3",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "42-arancini-agli-spinaci-prefritti",
    "name": "ARANCINI AGLI SPINACI PREFRITTI",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "3",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "43-arrosticini-di-mare-panati-totano-gigas",
    "name": "ARROSTICINI DI MARE PANATI (totano gigas)",
    "price": 8.3,
    "unit": "KG",
    "shortDesc": "4",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "44-alici-panate-croccanti",
    "name": "ALICI PANATE CROCCANTI",
    "price": 8.9,
    "unit": "KG",
    "shortDesc": "1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "45-filetto-di-baccala-pastellato-cprezzem",
    "name": "FILETTO DI BACCALA' PASTELLATO C/PREZZEM.",
    "price": 11.9,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "46-chele-di-granchio-panate",
    "name": "CHELE DI GRANCHIO PANATE",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "4X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "47-fiori-di-zucca-cmozzare-alici-prefritti",
    "name": "FIORI DI ZUCCA C/MOZZAR.E ALICI  PREFRITTI",
    "price": 9.3,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "48-fiori-di-zucca-cprosciutto-e-mozzar-prefr",
    "name": "FIORI DI ZUCCA C/PROSCIUTTO E MOZZAR  PREFR.",
    "price": 8.1,
    "unit": "KG",
    "shortDesc": "5X2",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "49-fiori-di-zucca-pastellati-prefritti",
    "name": "FIORI DI ZUCCA PASTELLATI PREFRITTI",
    "price": 11.5,
    "unit": "KG",
    "shortDesc": "4X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "50-frittelle-gamberi-e-zucchine",
    "name": "FRITTELLE GAMBERI E ZUCCHINE",
    "price": 11.5,
    "unit": "KG",
    "shortDesc": "4X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "51-gamberi-avvolti-in-filo-di-patata",
    "name": "GAMBERI AVVOLTI  IN FILO DI PATATA",
    "price": 14,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "52-mozzarelline-panate-con-tartufo-prefritte",
    "name": "MOZZARELLINE PANATE CON TARTUFO PREFRITTE",
    "price": 7.8,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "53-mozzarelline-panate-prefritte",
    "name": "MOZZARELLINE PANATE PREFRITTE",
    "price": 6.5,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "54-olive-ascolane",
    "name": "OLIVE ASCOLANE",
    "price": 5.4,
    "unit": "KG",
    "shortDesc": "4X2,500",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "55-olive-ascolane-prefritte",
    "name": "OLIVE ASCOLANE PREFRITTE",
    "price": 5.9,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "56-panzerotti-mozzarella-pomodoro-prefr",
    "name": "PANZEROTTI MOZZARELLA  POMODORO PREFR.",
    "price": 5.4,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "57-pizzette-di-pasta-sfoglia",
    "name": "PIZZETTE DI PASTA SFOGLIA",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "4x1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "58-polpette-melanzmozzprovola-affumic",
    "name": "POLPETTE MELANZ.MOZZ.PROVOLA AFFUMIC.",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "59-salatini-7-gusti",
    "name": "SALATINI 7 GUSTI",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "4X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "60-salvia-pastellata-prefritta",
    "name": "SALVIA PASTELLATA PREFRITTA",
    "price": 11.5,
    "unit": "KG",
    "shortDesc": "4X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "61-tris-di-verdure-pastellate-prefritte",
    "name": "TRIS DI VERDURE PASTELLATE PREFRITTE",
    "price": 5.2,
    "unit": "KG",
    "shortDesc": "5X1",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "62-gamberi-sgusciati-preccong",
    "name": "GAMBERI SGUSCIATI PREC.CONG.",
    "price": 14.9,
    "unit": "KG",
    "shortDesc": "4x2,250",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "63-polpa-di-granchio-precotta-in-piastina-da-gr-380",
    "name": "POLPA DI GRANCHIO PRECOTTA IN PIASTINA DA GR. 380",
    "price": 11.8,
    "unit": "CONF.",
    "shortDesc": "1x0,380",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "64-tartare-di-gambero-rosso-da-gr-80-sv",
    "name": "TARTARE DI GAMBERO ROSSO DA GR. 80 S/V",
    "price": 6.5,
    "unit": "CONF.",
    "shortDesc": "sfuso",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "65-polpette-di-brasato",
    "name": "POLPETTE DI BRASATO",
    "price": 14,
    "unit": "KG",
    "shortDesc": "2",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "66-polpette-di-baccala",
    "name": "POLPETTE DI BACCALA'",
    "price": 14,
    "unit": "KG",
    "shortDesc": "2",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "67-polpette-di-tonno-e-cipolla",
    "name": "POLPETTE DI TONNO E CIPOLLA",
    "price": 14,
    "unit": "KG",
    "shortDesc": "2",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "68-polpette-di-pollo-e-speck",
    "name": "POLPETTE DI POLLO E SPECK",
    "price": 12,
    "unit": "KG",
    "shortDesc": "2",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "69-polpette-di-verdure",
    "name": "POLPETTE DI VERDURE",
    "price": 12,
    "unit": "KG",
    "shortDesc": "2",
    "fullDesc": "",
    "images": []
  }
];
  const DATA = [
  {
    "name": "LISTINO CONSERVATI",
    "items": [
      {
        "id": "0-filetto-di-alici-so-x-720gr-albatros",
        "name": "FILETTO DI ALICI   S/O x 720gr ALBATROS",
        "price": 12.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "1-filetto-di-alici-so-x-720gr-corallo",
        "name": "FILETTO DI ALICI   S/O x 720gr CORALLO",
        "price": 11.6,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "2-alici-filpezzi-so-x-720gr",
        "name": "ALICI FIL.(PEZZI)   S/O x 720gr",
        "price": 9.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "3-alici-del-cantabrico-gr-48",
        "name": "ALICI DEL CANTABRICO GR. 48",
        "price": 2.8,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "4-filetto-di-aringa-da-gr-100",
        "name": "FILETTO DI ARINGA DA GR. 100",
        "price": 1.8,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "5-filetto-di-sgombro-al-pepe-da-200-g",
        "name": "FILETTO DI SGOMBRO AL PEPE DA 200 G",
        "price": 5.4,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "6-alici-marinate-x-1kg",
        "name": "ALICI MARINATE  x 1Kg",
        "price": 12.2,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "7-bocconcini-alici-oliva-e-peperconfda-1kg",
        "name": "BOCCONCINI ALICI OLIVA E PEPER.conf.da 1kg.",
        "price": 13.7,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "8-bottarga-di-muggine",
        "name": "BOTTARGA DI MUGGINE",
        "price": 72,
        "unit": "KG",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "9-bottarga-di-tonno",
        "name": "BOTTARGA DI TONNO",
        "price": 79,
        "unit": "KG",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "10-colatura-di-alici-da-100-ml",
        "name": "COLATURA DI ALICI DA 100 ML.",
        "price": 6.2,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "11-crema-di-dentice-in-vaschetta-da-500-gr",
        "name": "CREMA DI DENTICE IN VASCHETTA DA 500 gr.",
        "price": 15.8,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "12-crema-di-dentice-in-vaschetta-da-200-gr",
        "name": "CREMA DI DENTICE IN VASCHETTA DA 200 gr.",
        "price": 7.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "13-sarde-in-saor-in-vaschetta-da-800-gr",
        "name": "SARDE IN SAOR IN VASCHETTA DA 800 gr.",
        "price": 11,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "14-salmone-affto-buste-x-200gr",
        "name": "SALMONE AFF.TO BUSTE x 200gr",
        "price": 6.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "15-salmone-affto-preaffnorvegia",
        "name": "SALMONE AFF.TO PREAFF.NORVEGIA",
        "price": 22.5,
        "unit": "KG",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "16-stoccafisso-wm-8001000",
        "name": "STOCCAFISSO WM 800/1000",
        "price": 43,
        "unit": "KG",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "17-nero-di-seppia-in-vaso-da-gr500",
        "name": "NERO DI SEPPIA IN VASO DA gr.500",
        "price": 10.2,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "18-polpa-di-riccio-mare-x-90-gr",
        "name": "POLPA DI RICCIO MARE X 90 gr.",
        "price": 8.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "19-polpa-di-riccio-mare-x-70-gr-smeralda",
        "name": "POLPA DI RICCIO MARE X 70 gr. SMERALDA",
        "price": 11,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "20-polpa-di-granchio-x-170-gr-smeralda",
        "name": "POLPA DI GRANCHIO X 170 gr. SMERALDA",
        "price": 8,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "21-pesce-spada-tranci-fume",
        "name": "PESCE SPADA TRANCI FUME'",
        "price": 36.5,
        "unit": "KG",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "22-uova-di-salmone-x-50-gr",
        "name": "UOVA DI SALMONE X 50 gr.",
        "price": 10.3,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "23-uova-di-lompo-x-50-gr",
        "name": "UOVA DI LOMPO X 50 gr.",
        "price": 2.8,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "24-uova-di-aringa-x-55-gr",
        "name": "UOVA DI ARINGA X 55 gr.",
        "price": 10.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "25-tonno-corallo-in-ogirasole-x-1730gr",
        "name": "TONNO \"CORALLO\" IN O.GIRASOLE x 1730gr",
        "price": 10.6,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "26-tonno-in-busta-ogirasole-x-1-kg",
        "name": "TONNO IN BUSTA O.GIRASOLE x 1 KG.",
        "price": 7.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "27-tonno-tranci-fume",
        "name": "TONNO  TRANCI FUME'",
        "price": 27.5,
        "unit": "KG",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      }
    ]
  },
  {
    "name": "BACCALA'",
    "items": [
      {
        "id": "28-baccala-mantecato-gluten-free-vaschetta-da-1-kg",
        "name": "BACCALA' MANTECATO  (gluten free) (Vaschetta           da 1 kg.)",
        "price": 24,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "29-baccala-mantecato-gluten-free-200g",
        "name": "BACCALA' MANTECATO  (gluten free) (200g)",
        "price": 5.9,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "30-baccala-mantecato-35-vaschetta-da-1-kg",
        "name": "BACCALA' MANTECATO 35% (Vaschetta           da 1 kg.)",
        "price": 17.5,
        "unit": "NR.",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "31-baccala-mantecato-35-200g",
        "name": "BACCALA' MANTECATO 35% (200g)",
        "price": 3.8,
        "unit": "NR.",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "32-baccala-mantecato-45-vaschetta-da-1-kg",
        "name": "BACCALA' MANTECATO 45% (Vaschetta           da 1 kg.)",
        "price": 19.8,
        "unit": "NR.",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "33-baccala-mantecato-45-200g",
        "name": "BACCALA' MANTECATO 45% (200g)",
        "price": 4.2,
        "unit": "NR.",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "34-baccala-vicentina-vaschetta-da-1-kg",
        "name": "BACCALA' VICENTINA  * (Vaschetta           da 1 kg.)",
        "price": 25.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "35-baccala-vicentina-200g",
        "name": "BACCALA' VICENTINA  * (200g)",
        "price": 6.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "36-baccala-condito-vaschetta-da-1-kg",
        "name": "BACCALA' CONDITO    * (Vaschetta           da 1 kg.)",
        "price": 27.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "37-baccala-condito-200g",
        "name": "BACCALA' CONDITO    * (200g)",
        "price": 6.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "38-baccala-in-umido-vaschetta-da-1-kg",
        "name": "BACCALA' IN UMIDO   * (Vaschetta           da 1 kg.)",
        "price": 27,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "39-baccala-in-umido-200g",
        "name": "BACCALA' IN UMIDO   * (200g)",
        "price": 5.5,
        "unit": "NR",
        "shortDesc": "sfusi",
        "fullDesc": "",
        "images": []
      }
    ]
  },
  {
    "name": "I FRITTI",
    "items": [
      {
        "id": "40-anelli-di-cipolla-pastellati-prefritti",
        "name": "ANELLI DI CIPOLLA PASTELLATI  PREFRITTI",
        "price": 5.2,
        "unit": "KG",
        "shortDesc": "8X0,400",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "41-arancini-cmozzarella-e-prosciutto-prefr",
        "name": "ARANCINI C/MOZZARELLA E PROSCIUTTO PREFR.",
        "price": 5.5,
        "unit": "KG",
        "shortDesc": "3",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "42-arancini-agli-spinaci-prefritti",
        "name": "ARANCINI AGLI SPINACI PREFRITTI",
        "price": 5.5,
        "unit": "KG",
        "shortDesc": "3",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "43-arrosticini-di-mare-panati-totano-gigas",
        "name": "ARROSTICINI DI MARE PANATI (totano gigas)",
        "price": 8.3,
        "unit": "KG",
        "shortDesc": "4",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "44-alici-panate-croccanti",
        "name": "ALICI PANATE CROCCANTI",
        "price": 8.9,
        "unit": "KG",
        "shortDesc": "1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "45-filetto-di-baccala-pastellato-cprezzem",
        "name": "FILETTO DI BACCALA' PASTELLATO C/PREZZEM.",
        "price": 11.9,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "46-chele-di-granchio-panate",
        "name": "CHELE DI GRANCHIO PANATE",
        "price": 5.5,
        "unit": "KG",
        "shortDesc": "4X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "47-fiori-di-zucca-cmozzare-alici-prefritti",
        "name": "FIORI DI ZUCCA C/MOZZAR.E ALICI  PREFRITTI",
        "price": 9.3,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "48-fiori-di-zucca-cprosciutto-e-mozzar-prefr",
        "name": "FIORI DI ZUCCA C/PROSCIUTTO E MOZZAR  PREFR.",
        "price": 8.1,
        "unit": "KG",
        "shortDesc": "5X2",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "49-fiori-di-zucca-pastellati-prefritti",
        "name": "FIORI DI ZUCCA PASTELLATI PREFRITTI",
        "price": 11.5,
        "unit": "KG",
        "shortDesc": "4X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "50-frittelle-gamberi-e-zucchine",
        "name": "FRITTELLE GAMBERI E ZUCCHINE",
        "price": 11.5,
        "unit": "KG",
        "shortDesc": "4X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "51-gamberi-avvolti-in-filo-di-patata",
        "name": "GAMBERI AVVOLTI  IN FILO DI PATATA",
        "price": 14,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "52-mozzarelline-panate-con-tartufo-prefritte",
        "name": "MOZZARELLINE PANATE CON TARTUFO PREFRITTE",
        "price": 7.8,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "53-mozzarelline-panate-prefritte",
        "name": "MOZZARELLINE PANATE PREFRITTE",
        "price": 6.5,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "54-olive-ascolane",
        "name": "OLIVE ASCOLANE",
        "price": 5.4,
        "unit": "KG",
        "shortDesc": "4X2,500",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "55-olive-ascolane-prefritte",
        "name": "OLIVE ASCOLANE PREFRITTE",
        "price": 5.9,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "56-panzerotti-mozzarella-pomodoro-prefr",
        "name": "PANZEROTTI MOZZARELLA  POMODORO PREFR.",
        "price": 5.4,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "57-pizzette-di-pasta-sfoglia",
        "name": "PIZZETTE DI PASTA SFOGLIA",
        "price": 5.5,
        "unit": "KG",
        "shortDesc": "4x1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "58-polpette-melanzmozzprovola-affumic",
        "name": "POLPETTE MELANZ.MOZZ.PROVOLA AFFUMIC.",
        "price": 5.5,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "59-salatini-7-gusti",
        "name": "SALATINI 7 GUSTI",
        "price": 5.5,
        "unit": "KG",
        "shortDesc": "4X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "60-salvia-pastellata-prefritta",
        "name": "SALVIA PASTELLATA PREFRITTA",
        "price": 11.5,
        "unit": "KG",
        "shortDesc": "4X1",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "61-tris-di-verdure-pastellate-prefritte",
        "name": "TRIS DI VERDURE PASTELLATE PREFRITTE",
        "price": 5.2,
        "unit": "KG",
        "shortDesc": "5X1",
        "fullDesc": "",
        "images": []
      }
    ]
  },
  {
    "name": "LISTINO PRODOTTI CONGELATI",
    "items": [
      {
        "id": "62-gamberi-sgusciati-preccong",
        "name": "GAMBERI SGUSCIATI PREC.CONG.",
        "price": 14.9,
        "unit": "KG",
        "shortDesc": "4x2,250",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "63-polpa-di-granchio-precotta-in-piastina-da-gr-380",
        "name": "POLPA DI GRANCHIO PRECOTTA IN PIASTINA DA GR. 380",
        "price": 11.8,
        "unit": "CONF.",
        "shortDesc": "1x0,380",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "64-tartare-di-gambero-rosso-da-gr-80-sv",
        "name": "TARTARE DI GAMBERO ROSSO DA GR. 80 S/V",
        "price": 6.5,
        "unit": "CONF.",
        "shortDesc": "sfuso",
        "fullDesc": "",
        "images": []
      }
    ]
  },
  {
    "name": "POLPETTE CONGELATE da gr. 50 (40pz x crt)",
    "items": [
      {
        "id": "65-polpette-di-brasato",
        "name": "POLPETTE DI BRASATO",
        "price": 14,
        "unit": "KG",
        "shortDesc": "2",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "66-polpette-di-baccala",
        "name": "POLPETTE DI BACCALA'",
        "price": 14,
        "unit": "KG",
        "shortDesc": "2",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "67-polpette-di-tonno-e-cipolla",
        "name": "POLPETTE DI TONNO E CIPOLLA",
        "price": 14,
        "unit": "KG",
        "shortDesc": "2",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "68-polpette-di-pollo-e-speck",
        "name": "POLPETTE DI POLLO E SPECK",
        "price": 12,
        "unit": "KG",
        "shortDesc": "2",
        "fullDesc": "",
        "images": []
      },
      {
        "id": "69-polpette-di-verdure",
        "name": "POLPETTE DI VERDURE",
        "price": 12,
        "unit": "KG",
        "shortDesc": "2",
        "fullDesc": "",
        "images": []
      }
    ]
  }
];

  const listEl = document.getElementById("list");
  const countEl = document.getElementById("count");
  const q = document.getElementById("searchBox");
  const sortBtn = document.getElementById("sortBtn");
  const modal = document.getElementById("modal");
  const mTitle = document.getElementById("mTitle");
  const mDesc = document.getElementById("mDesc");
  const mFullDesc = document.getElementById("mFullDesc");
  const mPrice = document.getElementById("mPrice");
  const mGallery = document.getElementById("mGallery");
  const shareBtn = document.getElementById("shareBtn");
  const closeBtn = document.getElementById("closeBtn");
  const fmt = new Intl.NumberFormat("it-IT", { style: "currency", currency: "EUR" });

  let currentId = null;
  let sortState = "default"; // 'default', 'asc', 'desc'

  function formatPrice(price, unit) {
    const priceText = fmt.format(price);
    if (unit) {
      const unitLower = String(unit).toLowerCase().trim();
      if (unitLower === '/kg' || unitLower === 'kg') {
        return priceText + ' /kg';
      }
    }
    return priceText;
  }

  function itemTemplate(p) {
    // Using simple string concatenation to build the HTML for robustness.
    return (
      '<div class="item" onclick="openModal(\'' + p.id + '\')" role="button" tabindex="0" aria-label="Vedi dettagli per ' + p.name + '">' +
        '<img src="images/green.png" class="item-image" alt="" onerror="this.style.display=\'none\'">' +
        '<div class="info">' +
          '<h3 class="title">' + p.name + '</h3>' +
          '<p class="desc">' + (p.shortDesc || "") + '</p>' +
        '</div>' +
        '<div class="price">' + formatPrice(p.price, p.unit) + '</div>' +
      '</div>'
    );
  }

  function categoryTemplate(category) {
    return (
      '<div class="category">' +
        '<h2 class="category-header">' + category.name + '</h2>' +
        '<div class="items-container">' + category.items.map(itemTemplate).join("") + '</div>' +
      '</div>'
    );
  }

  function render() {
    const searchTerm = q.value.trim().toLowerCase();
    let visibleItemCount = 0;

    // Filter data based on search
    const filteredData = JSON.parse(JSON.stringify(DATA))
      .map(category => {
        category.items = category.items.filter(item =>
          (item.name || "").toLowerCase().includes(searchTerm) ||
          (item.shortDesc || "").toLowerCase().includes(searchTerm)
        );
        return category;
      })
      .filter(category => category.items.length > 0);

    // Sort data if needed
    if (sortState !== 'default') {
      filteredData.forEach(category => {
        category.items.sort((a, b) => {
          return sortState === 'asc'
            ? a.name.localeCompare(b.name, 'it')
            : b.name.localeCompare(a.name, 'it');
        });
      });
    }

    filteredData.forEach(c => visibleItemCount += c.items.length);

    listEl.innerHTML = visibleItemCount === 0
      ? '<div class="item" style="justify-content:center;">Nessun risultato trovato.</div>'
      : filteredData.map(categoryTemplate).join("");

    countEl.textContent = searchTerm
      ? visibleItemCount + ' risultati'
      : ALL_PRODUCTS.length + ' prodotti in catalogo';
      
    if (sortState === 'asc') {
        sortBtn.textContent = 'Ordine: A-Z';
    } else if (sortState === 'desc') {
        sortBtn.textContent = 'Ordine: Z-A';
    } else {
        sortBtn.textContent = 'Ordine: Originale';
    }
  }

  function productAnchorUrl(id) {
    const base = location.origin + location.pathname;
    return base + '#' + encodeURIComponent(id);
  }

  async function shareProduct(id) {
    const product = ALL_PRODUCTS.find(p => p.id === id);
    if (!product) return;

    const shareText = product.name + ' ‚Äì ' + formatPrice(product.price, product.unit) + '\n' +
                      (product.shortDesc || "") + '\n' +
                      productAnchorUrl(product.id);
    
    try {
      if (navigator.share) {
        await navigator.share({ title: product.name, text: shareText });
        return;
      }
    } catch (err) {
      console.error("Share API error:", err);
    }
    
    try {
      await navigator.clipboard.writeText(productAnchorUrl(product.id));
      alert("Link del prodotto copiato negli appunti!");
    } catch (err) {
      console.error("Clipboard API error:", err);
      alert("Impossibile copiare il link.");
    }
  }

  function adjustModalImages() {
    const content = document.querySelector('.modal-content');
    const gallery = document.getElementById('mGallery');
    if (!content || !gallery) return;

    const titleH = document.getElementById('mTitle')?.offsetHeight || 0;
    const descH = document.getElementById('mDesc')?.offsetHeight || 0;
    const fullH = document.getElementById('mFullDesc')?.offsetHeight || 0;
    const priceH = document.getElementById('mPrice')?.offsetHeight || 0;
    const footerH = document.querySelector('.modal-footer')?.offsetHeight || 0;
    const paddings = 40; // Approx vertical padding
    const max = content.clientHeight - (titleH + descH + fullH + priceH + footerH + paddings);
    
    gallery.querySelectorAll('img').forEach(img => {
      img.style.maxHeight = Math.max(120, max) + 'px';
    });
  }
  
  function closeModal() {
    if (!modal.classList.contains("open")) return;
    modal.classList.remove("open");
    document.body.style.overflow = "";
    currentId = null;
    if (location.hash) {
      history.pushState("", document.title, location.pathname + location.search);
    }
  }

  window.openModal = function(id) {
    const p = ALL_PRODUCTS.find(x => x.id === id);
    if (!p) return;

    currentId = id;
    mTitle.textContent = p.name;
    mDesc.textContent = p.shortDesc || "";
    mFullDesc.textContent = p.fullDesc || "";
    mPrice.textContent = formatPrice(p.price, p.unit);

    const images = (p.images || []).slice(0, 2);
    mGallery.innerHTML = images.length > 0
      ? images.map(src => '<img loading="lazy" src="' + src + '" alt="' + p.name + '" onerror="this.style.display=\'none\';">').join("")
      : '<p style="color:var(--muted);font-size:14px;">Nessuna immagine disponibile per questo prodotto.</p>';

    shareBtn.onclick = () => shareProduct(currentId);
    modal.classList.add("open");
    document.body.style.overflow = "hidden";
    closeBtn.focus();

    if (location.hash !== "#" + id) {
      history.pushState({ modal: true, id: id }, "", "#" + id);
    }
    setTimeout(adjustModalImages, 10);
  }

  // Event Listeners
  sortBtn.addEventListener("click", () => {
    sortState = sortState === 'default' ? 'asc' : sortState === 'asc' ? 'desc' : 'default';
    render();
  });
  q.addEventListener("input", () => render());
  closeBtn.onclick = closeModal;
  modal.addEventListener("click", e => { if (e.target === modal) closeModal(); });
  window.addEventListener("keydown", e => { if (e.key === "Escape") closeModal(); });
  window.addEventListener("popstate", () => {
    if (location.hash) {
      const id = decodeURIComponent(location.hash.slice(1));
      if (!modal.classList.contains("open") && ALL_PRODUCTS.some(p => p.id === id)) {
        openModal(id);
      }
    } else {
      if (modal.classList.contains("open")) {
        closeModal();
      }
    }
  });
  window.addEventListener('resize', () => { if (modal.classList.contains('open')) adjustModalImages(); });

  // Initial Render
  render();
  if (location.hash) {
    const id = decodeURIComponent(location.hash.slice(1));
    if (ALL_PRODUCTS.some(p => p.id === id)) {
      openModal(id);
    }
  }
  
  </script>
</body>
</html>