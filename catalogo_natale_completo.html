<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catalogo Prodotti ZANON SEAFISH ‚Äì Natale 2025</title>
  <style>
    :root{--rosso:#b30000;--verde:#1f7a1f;--verde-accent:#28a745;--bianco:#ffffff}
    body{
      font-family:Arial,sans-serif;margin:0;padding:0;
      background:url("images/sfondo_card_natale.png") center/cover fixed no-repeat
    }

    header{background:var(--bianco);color:var(--rosso);padding:15px 15px 36px;position:relative;text-align:center;
           border-bottom:6px solid var(--rosso);box-shadow:0 6px 16px rgba(0,0,0,.2)}
    .contact{position:absolute;top:12px;left:12px}
    .contact a{background:var(--verde-accent);color:#fff;padding:8px 14px;border-radius:6px;font-weight:bold;
               text-decoration:none;display:inline-flex;gap:6px;box-shadow:0 2px 6px rgba(0,0,0,.2)}
    .search{position:absolute;top:12px;right:12px}
    .search input{width:220px;max-width:38vw;padding:8px 10px;border-radius:6px;border:1px solid #ccc}

    .titoloNatale{margin:8px 0 0;text-align:center;font-weight:800;line-height:1.15;color:var(--rosso)}
    .titoloNatale .grad{
      display:inline-block;
      background:linear-gradient(90deg,#b30000,#ffcc00,#b30000);
      background-size:200%% 100%%;
      -webkit-background-clip:text;background-clip:text;color:transparent;
      animation:gradGlow 2.8s ease-in-out infinite;
      text-shadow:0 0 8px rgba(255,255,255,.35)
    }
    @keyframes gradGlow{
      0%%{background-position:0%% 50%%;text-shadow:0 0 6px rgba(255,255,255,.4)}
      50%%{background-position:100%% 50%%;text-shadow:0 0 14px rgba(255,255,255,.8)}
      100%%{background-position:0%% 50%%;text-shadow:0 0 6px rgba(255,255,255,.4)}
    }

    .muted{color:#333}
    .container{max-width:1200px;margin:20px auto;padding:0 15px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px}

    .card{background:#fff;border:2px solid var(--rosso);border-radius:12px;box-shadow:0 0 12px rgba(0,128,0,.25);
          overflow:hidden;cursor:pointer;transition:transform .18s ease,box-shadow .18s ease;position:relative}
    .card:hover{transform:scale(1.02);box-shadow:0 8px 18px rgba(0,0,0,.25)}
    .card img{width:100%%;height:180px;object-fit:cover;display:block}
    .card-body{padding:15px}
    .title{font-weight:bold;margin:0 0 10px;color:var(--rosso)}
    .price{color:var(--verde-accent);font-weight:bold;margin:10px 0}
    .actions{position:absolute;bottom:10px;right:10px}
    .actions button{background:none;border:none;cursor:pointer}
    .actions img{width:32px;height:32px}

    footer{margin-top:30px;padding:16px;text-align:center;color:#fff;background:var(--rosso);border-top:6px solid #004d00}

    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;
           padding:20px;z-index:1000}
    .modal.open{display:flex}
    .modal-content{
      background:url("images/sfondo-natale.jpg") center/cover no-repeat;
      border-radius:10px;max-width:800px;width:100%%;padding:20px;position:relative;
      max-height:90vh;overflow:auto;box-shadow:0 10px 24px rgba(0,0,0,.35);color:#fff
    }
    .modal-content::before{content:"";position:absolute;inset:0;border-radius:10px;background:rgba(0,0,0,.40);z-index:0}
    .modal-content>*{position:relative;z-index:1}
    .modal-content img{width:100%%;object-fit:contain;display:block;margin:0 auto 15px;background:#fff;border-radius:8px}
    .close{position:absolute;top:10px;right:10px;border:none;background:#eee;border-radius:6px;padding:6px 10px;cursor:pointer}
    .share-modal{position:absolute;bottom:12px;right:12px}

    @media (max-width:640px){
      header{padding:10px 12px 20px}
      .contact,.search{position:static;margin:6px 0;text-align:center}
      .search input{width:90%%;max-width:320px}
      header img{height:60px !important;margin:6px auto 8px !important}
      .titoloNatale{font-size:1.3rem;line-height:1.2}
    }
  </style>
</head>
<body>
  <header>
    <div class="contact"><a href="https://www.zanonseafish.it/contatti/" target="_blank" rel="noopener">‚úâÔ∏è Contattaci</a></div>
    <div class="search"><input type="text" id="searchBox" placeholder="Cerca prodotti‚Ä¶"></div>

    <img src="images/zanonlogonatale.png" alt="Zanon Seafish Ingros SRL"
         style="height:80px;display:block;margin:0 auto 10px"
         onerror="this.onerror=null;this.src='images/default.png';">

    <h1 class="titoloNatale">
      <span class="grad">Catalogo Prodotti</span><br>
      üéÑ‚ùÑÔ∏è <span class="grad">OFFERTE NATALE 2025</span> üéÅüéÑ
    </h1>
    <div id="count" class="muted" style="margin-top:6px"></div>
  </header>

  <div class="container">
    <div id="grid" class="grid"></div>
  </div>

  <footer>üéÅ‚ùÑÔ∏è Buone Feste da ZANON SEAFISH üéÑüéÑ</footer>

  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content">
      <button id="closeBtn" class="close" aria-label="Chiudi">Chiudi</button>
      <h2 id="mTitle"></h2>
      <div id="mGallery"></div>
      <p id="mDesc"></p>
      <p id="mFullDesc"></p>
      <p id="mPrice" class="price"></p>
      <div class="share-modal">
        <button id="shareBtn"><img src="images/share.png" alt="Condividi"></button>
      </div>
    </div>
  </div>

  <script>
  const PRODUCTS = []; // Inserire qui la lista completa dei prodotti

  const grid=document.getElementById("grid");
  const count=document.getElementById("count");
  const q=document.getElementById("searchBox");
  const modal=document.getElementById("modal");
  const mTitle=document.getElementById("mTitle");
  const mDesc=document.getElementById("mDesc");
  const mFullDesc=document.getElementById("mFullDesc");
  const mPrice=document.getElementById("mPrice");
  const mGallery=document.getElementById("mGallery");
  const closeBtn=document.getElementById("closeBtn");
  const shareBtn=document.getElementById("shareBtn");
  let currentId=null;

  function cardTemplate(p){
    return `
      <div class="card" onclick="openModal('${p.id}')">
        <img src="${p.images[0]}" alt="${p.name}" onerror="this.onerror=null;this.src='images/default.png';">
        <div class="card-body">
          <div class="title">${p.name}</div>
          <div>${p.shortDesc}</div>
          <div class="price">‚Ç¨${p.price.toFixed(2)}</div>
        </div>
        <div class="actions" onclick="event.stopPropagation()">
          <button onclick="shareProduct('${p.id}')"><img src="images/share.png" alt="Condividi"></button>
        </div>
      </div>`;
  }

  function render(list=PRODUCTS){
    grid.innerHTML=list.map(cardTemplate).join("");
    count.textContent=list.length===PRODUCTS.length?`${list.length} prodotti`:`${list.length} risultati`;
  }

  async function shareProduct(id){
    const p=PRODUCTS.find(x=>x.id===id); if(!p) return;
    const imgUrl=new URL(p.images[0],location.href).href;
    const text=`${p.name} ‚Äì ‚Ç¨${p.price.toFixed(2)}\n${p.shortDesc||""}`;

    try{
      if(navigator.canShare && window.File && window.Blob){
        const resp=await fetch(imgUrl);
        const blob=await resp.blob();
        const file=new File([blob], p.id+".jpg", {type: blob.type||"image/jpeg"});
        const data={title:p.name,text,files:[file]};
        if(navigator.canShare(data)){ await navigator.share(data); return; }
      }
      if(navigator.share){ await navigator.share({title:p.name,text,url:imgUrl}); return; }
    }catch(e){}
    alert("Condivisione non supportata su questo dispositivo.");
  }

  function openModal(id){
    const p=PRODUCTS.find(x=>x.id===id); if(!p) return;
    currentId=id;
    mTitle.textContent=p.name;
    mDesc.textContent=p.shortDesc||"";
    mFullDesc.textContent=p.fullDesc||"";
    mPrice.textContent="‚Ç¨"+p.price.toFixed(2);
    mGallery.innerHTML=(p.images||[]).map(src=>`<img src="${src}" alt="${p.name}">`).join("");
    modal.classList.add("open");
  }

  function closeModal(){modal.classList.remove("open");currentId=null;}

  closeBtn.onclick=closeModal;
  shareBtn.onclick=()=>{ if(currentId) shareProduct(currentId); };
  modal.addEventListener("click",e=>{ if(e.target===modal) closeModal(); });
  window.addEventListener("keydown",e=>{ if(e.key==="Escape") closeModal(); });

  q.addEventListener("input",()=>{
    const term=q.value.trim().toLowerCase();
    if(!term){render(PRODUCTS);return;}
    const res=PRODUCTS.filter(p=>{
      const hay=[p.name,p.shortDesc,p.fullDesc].join(" ").toLowerCase();
      return hay.includes(term);
    });
    render(res);
  });

  render();
  </script>
</body>
</html>