<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Catalogo Prodotti</title>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#fbfbf8;
      --ink:#111;
      --muted:#606060;
      --line:#e7e4dc;
      --brand:#0b5;
      --price:#0a6a2b;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;margin:0;background:var(--bg);color:var(--ink)}
    header{background:linear-gradient(180deg,#0b1620 0%, #0e1f2a 60%, #0e1f2a00 100%);color:#fff;padding:20px 12px 18px;text-align:center;position:relative}
    header .top{display:flex;flex-direction:column;align-items:center;gap:8px;max-width:1100px;margin:0 auto}
    header img.logo{height:60px;width:auto;display:block;margin:0 auto}
    header h1{font-family:"Playfair Display",serif;font-weight:600;letter-spacing:.02em;margin:0 0 2px 0;font-size:24px;line-height:1.15;word-break:break-word;overflow-wrap:anywhere}
    header .sub{opacity:.85;font-size:11.5px;margin-top:0}
    .tools{display:flex;justify-content:center;margin-top:8px}
    .search{max-width:480px;width:100%}
    .search input{width:100%;padding:10px;border-radius:999px;border:1px solid #ffffff40;background:#ffffff12;color:var(--brand);outline:none}
    .count{color:var(--brand);margin-top:8px;font-size:12px}
    .container{max-width:1100px;margin:6px auto 14px;padding:0 10px}
    .list{display:flex;flex-direction:column;gap:10px}
    .item{display:grid;grid-template-columns:84px 1fr 86px;gap:14px;align-items:center;background:rgba(255,255,255,.92);border:1px solid var(--line);border-radius:10px;padding:8px 10px;box-shadow:0 1px 6px rgba(0,0,0,.06);cursor:pointer;transition:transform .12s ease, box-shadow .12s ease}
    .item:hover{transform:translateY(-1px);box-shadow:0 4px 10px rgba(0,0,0,.06)}
    .thumb{width:84px;height:84px;border-radius:12px;overflow:hidden;background:#f1f1ed;border:1px solid var(--line)}
    .thumb img{width:100%;height:100%;object-fit:cover;display:block}
    .info{min-width:0;padding-left:8px}
    .title{font-family:"Playfair Display",serif;font-weight:700;font-size:18px;letter-spacing:.02em;margin:0 0 3px 0;text-transform:uppercase}
    .desc{color:var(--muted);font-size:12px;line-height:1.3;margin:0 0 4px 0}
    .divider{height:1px;background:var(--line);margin:3px 0}
    .price{justify-self:end;align-self:end;color:var(--price);font-weight:700;font-size:16px}
    .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;padding:20px;z-index:1000}
    .modal.open{display:flex}
    .modal-content{background:#fff;border-radius:12px;max-width:860px;width:min(96vw,860px);padding:20px;position:relative;max-height:90vh;overflow:hidden;box-shadow:0 10px 24px rgba(0,0,0,.35);display:flex;flex-direction:column}
    .m-title{font-family:"Playfair Display",serif;margin:0 0 10px 0}
    .modal-footer{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-top:12px;flex:0 0 auto}
    .share-small{border:none;border-radius:18px;padding:8px 12px;font-size:.9rem;cursor:pointer;background:#111;color:#fff;box-shadow:0 4px 10px rgba(0,0,0,.3)}
    .close-btn{border:none;border-radius:18px;padding:8px 12px;font-size:.9rem;cursor:pointer;background:#eee;color:#111;box-shadow:0 2px 6px rgba(0,0,0,.15)}
    #mGallery{flex:1 1 auto;overflow:auto;display:grid;gap:12px;align-items:center;justify-items:center}
    #mGallery:has(img:nth-child(2)){grid-template-columns:1fr 1fr}
    #mGallery img{max-width:100%;height:auto;display:block;object-fit:contain}
    .site-footer{max-width:1100px;margin:18px auto 24px;padding:0 10px;color:#444;font-size:12px}
    .site-rule{border:none;height:1px;background:#e5e2da;margin:6px 0 10px}
    .site-footer-inner{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
    .footer-logo{height:20px;width:auto}
    .foot-text{flex:1;min-width:240px}
    .foot-mail{font-size:12px;color:#0b5;text-decoration:none}
    @media (max-width:820px){header{padding:16px 10px 16px}header h1{font-size:22px}.item{grid-template-columns:76px 1fr 74px}.thumb{width:76px;height:76px;border-radius:10px}.title{font-size:16px}.price{font-size:15px}}
    @media (max-width:560px){header{padding:14px 8px 14px}header h1{font-size:20px}.item{grid-template-columns:66px 1fr;grid-template-rows:auto auto;gap:8px}.price{grid-column:2;justify-self:end}}
    @media print{@page{size:A4;margin:14mm 12mm}body{background:#fff}header{background:none!important;color:#000!important;border-bottom:1px solid #ddd!important;padding:0 0 6mm}.sub{display:none!important}.tools, #count{display:none!important}.item{break-inside:avoid-page;page-break-inside:avoid;box-shadow:none;border-color:#ddd}.modal{display:none!important}.site-rule{background:#000;height:1px}.site-footer{color:#000}.foot-mail{color:#000;text-decoration:underline}.print-footer .line{display:inline-flex;align-items:center;gap:6px}.print-footer img{height:12px;width:auto;vertical-align:middle}.print-footer .text{font-weight:600}}
    .search input::placeholder{color:rgba(11,85,0,.7)}
    .print-footer {display: none !important;}
    @media print {.print-footer {display: block !important;position: fixed;bottom: 0;left: 0;right: 0;width: 100%;text-align: center;font-size: 10px;color: #000;opacity: .95;}.print-footer .line {display: inline-flex;align-items: center;gap: 6px;}.print-footer img {height: 12px;width: auto;vertical-align: middle;}.print-footer .text {font-weight: 600;}}
  </style>
</head>
<body>
  <header>
    <div class="top">
      <img class="logo" src="images/logo.png" alt="Logo" onerror="this.onerror=null;this.src='images/default1.jpg';">
      <h1>Catalogo Prodotti</h1>
      <div class="sub">Clicca un elemento per i dettagli e la condivisione.</div>
      <div class="tools">
        <div class="search"><input id="searchBox" placeholder="Cerca prodotti‚Ä¶"></div>
      </div>
      <div id="count" class="count"></div>
    </div>
  </header>
  <div class="print-footer" aria-hidden="true">
    <span class="line">
      <img src="images/logo.png" alt="Logo">
      <span class="text">Catalogo Prodotti</span>
    </span>
  </div>
  <div class="container">
    <div id="list" class="list"></div>
  </div>
  <div id="modal" class="modal" role="dialog" aria-modal="true">
    <div class="modal-content" aria-labelledby="mTitle">
      <h2 id="mTitle" class="m-title"></h2>
      <div id="mGallery"></div>
      <p id="mDesc" class="desc"></p>
      <p id="mFullDesc"></p>
      <p id="mPrice" class="price" style="margin-top:0"></p>
      <div class="modal-footer">
        <button id="shareBtn" class="share-small" title="Condividi" aria-label="Condividi">üì§ Condividi</button>
        <button id="closeBtn" class="close-btn" aria-label="Chiudi">Chiudi</button>
      </div>
    </div>
  </div>
  <footer class="site-footer">
    <hr class="site-rule">
    <div class="site-footer-inner">
      <img src="images/logo.png" alt="Logo" class="footer-logo" onerror="this.style.display='none'">
      <div class="foot-text">
        <strong>Azienda Srl</strong> ¬∑ P.IVA 0123456789 ¬∑
        Indirizzo, CAP, Citt√† ¬∑
        Tel: 012 3456789 ¬∑
        <a href="#" target="_blank" rel="noopener">www.sito.it</a> ¬∑
        <a href="mailto:info@sito.it">info@sito.it</a>
      </div>
      <a class="foot-mail" href="mailto:info@sito.it" title="Scrivi una mail">‚úâÔ∏è Contattaci</a>
    </div>
  </footer>
  <script id="products-data" type="application/json">[
  {
    "id": "0-baccala-condito-200g",
    "name": "BACCALA' CONDITO    * (200g)",
    "price": 6.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "1-baccala-condito-vaschetta-da-1-kg",
    "name": "BACCALA' CONDITO    * (Vaschetta           da 1 kg.)",
    "price": 27.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "2-baccala-in-umido-200g",
    "name": "BACCALA' IN UMIDO   * (200g)",
    "price": 5.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "3-baccala-in-umido-vaschetta-da-1-kg",
    "name": "BACCALA' IN UMIDO   * (Vaschetta           da 1 kg.)",
    "price": 27,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "4-baccala-mantecato-gluten-free-200g",
    "name": "BACCALA' MANTECATO  (gluten free) (200g)",
    "price": 5.9,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "5-baccala-mantecato-gluten-free-vaschetta-da-1-kg",
    "name": "BACCALA' MANTECATO  (gluten free) (Vaschetta           da 1 kg.)",
    "price": 24,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "6-baccala-mantecato-35-200g",
    "name": "BACCALA' MANTECATO 35% (200g)",
    "price": 3.8,
    "unit": "NR.",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "7-baccala-mantecato-35-vaschetta-da-1-kg",
    "name": "BACCALA' MANTECATO 35% (Vaschetta           da 1 kg.)",
    "price": 17.5,
    "unit": "NR.",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "8-baccala-mantecato-45-200g",
    "name": "BACCALA' MANTECATO 45% (200g)",
    "price": 4.2,
    "unit": "NR.",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "9-baccala-mantecato-45-vaschetta-da-1-kg",
    "name": "BACCALA' MANTECATO 45% (Vaschetta           da 1 kg.)",
    "price": 19.8,
    "unit": "NR.",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "10-baccala-vicentina-200g",
    "name": "BACCALA' VICENTINA  * (200g)",
    "price": 6.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "11-baccala-vicentina-vaschetta-da-1-kg",
    "name": "BACCALA' VICENTINA  * (Vaschetta           da 1 kg.)",
    "price": 25.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: BACCALA'",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "12-alici-panate-croccanti",
    "name": "ALICI PANATE CROCCANTI",
    "price": 8.9,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "13-anelli-di-cipolla-pastellati-prefritti",
    "name": "ANELLI DI CIPOLLA PASTELLATI  PREFRITTI",
    "price": 5.2,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "14-arancini-agli-spinaci-prefritti",
    "name": "ARANCINI AGLI SPINACI PREFRITTI",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "15-arancini-cmozzarella-e-prosciutto-prefr",
    "name": "ARANCINI C/MOZZARELLA E PROSCIUTTO PREFR.",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "16-arrosticini-di-mare-panati-totano-gigas",
    "name": "ARROSTICINI DI MARE PANATI (totano gigas)",
    "price": 8.3,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "17-chele-di-granchio-panate",
    "name": "CHELE DI GRANCHIO PANATE",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "18-filetto-di-baccala-pastellato-cprezzem",
    "name": "FILETTO DI BACCALA' PASTELLATO C/PREZZEM.",
    "price": 11.9,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "19-fiori-di-zucca-cmozzare-alici-prefritti",
    "name": "FIORI DI ZUCCA C/MOZZAR.E ALICI  PREFRITTI",
    "price": 9.3,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "20-fiori-di-zucca-cprosciutto-e-mozzar-prefr",
    "name": "FIORI DI ZUCCA C/PROSCIUTTO E MOZZAR  PREFR.",
    "price": 8.1,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "21-fiori-di-zucca-pastellati-prefritti",
    "name": "FIORI DI ZUCCA PASTELLATI PREFRITTI",
    "price": 11.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "22-frittelle-gamberi-e-zucchine",
    "name": "FRITTELLE GAMBERI E ZUCCHINE",
    "price": 11.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "23-gamberi-avvolti-in-filo-di-patata",
    "name": "GAMBERI AVVOLTI  IN FILO DI PATATA",
    "price": 14,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "24-mozzarelline-panate-con-tartufo-prefritte",
    "name": "MOZZARELLINE PANATE CON TARTUFO PREFRITTE",
    "price": 7.8,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "25-mozzarelline-panate-prefritte",
    "name": "MOZZARELLINE PANATE PREFRITTE",
    "price": 6.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "26-olive-ascolane",
    "name": "OLIVE ASCOLANE",
    "price": 5.4,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "27-olive-ascolane-prefritte",
    "name": "OLIVE ASCOLANE PREFRITTE",
    "price": 5.9,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "28-panzerotti-mozzarella-pomodoro-prefr",
    "name": "PANZEROTTI MOZZARELLA  POMODORO PREFR.",
    "price": 5.4,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "29-pizzette-di-pasta-sfoglia",
    "name": "PIZZETTE DI PASTA SFOGLIA",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "30-polpette-melanzmozzprovola-affumic",
    "name": "POLPETTE MELANZ.MOZZ.PROVOLA AFFUMIC.",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "31-salatini-7-gusti",
    "name": "SALATINI 7 GUSTI",
    "price": 5.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "32-salvia-pastellata-prefritta",
    "name": "SALVIA PASTELLATA PREFRITTA",
    "price": 11.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "33-tris-di-verdure-pastellate-prefritte",
    "name": "TRIS DI VERDURE PASTELLATE PREFRITTE",
    "price": 5.2,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: I FRITTI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "34-alici-del-cantabrico-gr-48",
    "name": "ALICI DEL CANTABRICO GR. 48",
    "price": 2.8,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "35-alici-filpezzi-so-x-720gr",
    "name": "ALICI FIL.(PEZZI)   S/O x 720gr",
    "price": 9.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "36-alici-marinate-x-1kg",
    "name": "ALICI MARINATE  x 1Kg",
    "price": 12.2,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "37-bocconcini-alici-oliva-e-peperconfda-1kg",
    "name": "BOCCONCINI ALICI OLIVA E PEPER.conf.da 1kg.",
    "price": 13.7,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "38-bottarga-di-muggine",
    "name": "BOTTARGA DI MUGGINE",
    "price": 72,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "39-bottarga-di-tonno",
    "name": "BOTTARGA DI TONNO",
    "price": 79,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "40-colatura-di-alici-da-100-ml",
    "name": "COLATURA DI ALICI DA 100 ML.",
    "price": 6.2,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "41-crema-di-dentice-in-vaschetta-da-200-gr",
    "name": "CREMA DI DENTICE IN VASCHETTA DA 200 gr.",
    "price": 7.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "42-crema-di-dentice-in-vaschetta-da-500-gr",
    "name": "CREMA DI DENTICE IN VASCHETTA DA 500 gr.",
    "price": 15.8,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "43-filetto-di-alici-so-x-720gr-albatros",
    "name": "FILETTO DI ALICI   S/O x 720gr ALBATROS",
    "price": 12.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "44-filetto-di-alici-so-x-720gr-corallo",
    "name": "FILETTO DI ALICI   S/O x 720gr CORALLO",
    "price": 11.6,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "45-filetto-di-aringa-da-gr-100",
    "name": "FILETTO DI ARINGA DA GR. 100",
    "price": 1.8,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "46-filetto-di-sgombro-al-pepe-da-200-g",
    "name": "FILETTO DI SGOMBRO AL PEPE DA 200 G",
    "price": 5.4,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "47-nero-di-seppia-in-vaso-da-gr500",
    "name": "NERO DI SEPPIA IN VASO DA gr.500",
    "price": 10.2,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "48-pesce-spada-tranci-fume",
    "name": "PESCE SPADA TRANCI FUME'",
    "price": 36.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "49-polpa-di-granchio-x-170-gr-smeralda",
    "name": "POLPA DI GRANCHIO X 170 gr. SMERALDA",
    "price": 8,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "50-polpa-di-riccio-mare-x-70-gr-smeralda",
    "name": "POLPA DI RICCIO MARE X 70 gr. SMERALDA",
    "price": 11,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "51-polpa-di-riccio-mare-x-90-gr",
    "name": "POLPA DI RICCIO MARE X 90 gr.",
    "price": 8.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "52-salmone-affto-buste-x-200gr",
    "name": "SALMONE AFF.TO BUSTE x 200gr",
    "price": 6.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "53-salmone-affto-preaffnorvegia",
    "name": "SALMONE AFF.TO PREAFF.NORVEGIA",
    "price": 22.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "54-sarde-in-saor-in-vaschetta-da-800-gr",
    "name": "SARDE IN SAOR IN VASCHETTA DA 800 gr.",
    "price": 11,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "55-stoccafisso-wm-8001000",
    "name": "STOCCAFISSO WM 800/1000",
    "price": 43,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "56-tonno-tranci-fume",
    "name": "TONNO  TRANCI FUME'",
    "price": 27.5,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "57-tonno-corallo-in-ogirasole-x-1730gr",
    "name": "TONNO \"CORALLO\" IN O.GIRASOLE x 1730gr",
    "price": 10.6,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "58-tonno-in-busta-ogirasole-x-1-kg",
    "name": "TONNO IN BUSTA O.GIRASOLE x 1 KG.",
    "price": 7.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "59-uova-di-aringa-x-55-gr",
    "name": "UOVA DI ARINGA X 55 gr.",
    "price": 10.5,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "60-uova-di-lompo-x-50-gr",
    "name": "UOVA DI LOMPO X 50 gr.",
    "price": 2.8,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "61-uova-di-salmone-x-50-gr",
    "name": "UOVA DI SALMONE X 50 gr.",
    "price": 10.3,
    "unit": "NR",
    "shortDesc": "Prodotto della categoria: LISTINO CONSERVATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "62-gamberi-sgusciati-preccong",
    "name": "GAMBERI SGUSCIATI PREC.CONG.",
    "price": 14.9,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: LISTINO PRODOTTI CONGELATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "63-polpa-di-granchio-precotta-in-piastina-da-gr-380",
    "name": "POLPA DI GRANCHIO PRECOTTA IN PIASTINA DA GR. 380",
    "price": 11.8,
    "unit": "CONF.",
    "shortDesc": "Prodotto della categoria: LISTINO PRODOTTI CONGELATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "64-tartare-di-gambero-rosso-da-gr-80-sv",
    "name": "TARTARE DI GAMBERO ROSSO DA GR. 80 S/V",
    "price": 6.5,
    "unit": "CONF.",
    "shortDesc": "Prodotto della categoria: LISTINO PRODOTTI CONGELATI",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "65-polpette-di-baccala",
    "name": "POLPETTE DI BACCALA'",
    "price": 14,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: POLPETTE CONGELATE da gr. 50 (40pz x crt)",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "66-polpette-di-brasato",
    "name": "POLPETTE DI BRASATO",
    "price": 14,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: POLPETTE CONGELATE da gr. 50 (40pz x crt)",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "67-polpette-di-pollo-e-speck",
    "name": "POLPETTE DI POLLO E SPECK",
    "price": 12,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: POLPETTE CONGELATE da gr. 50 (40pz x crt)",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "68-polpette-di-tonno-e-cipolla",
    "name": "POLPETTE DI TONNO E CIPOLLA",
    "price": 14,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: POLPETTE CONGELATE da gr. 50 (40pz x crt)",
    "fullDesc": "",
    "images": []
  },
  {
    "id": "69-polpette-di-verdure",
    "name": "POLPETTE DI VERDURE",
    "price": 12,
    "unit": "KG",
    "shortDesc": "Prodotto della categoria: POLPETTE CONGELATE da gr. 50 (40pz x crt)",
    "fullDesc": "",
    "images": []
  }
]</script>
  <script>
  document.addEventListener('DOMContentLoaded', function() {
    const PRODUCTS_DATA = document.getElementById('products-data');
    const PRODUCTS = PRODUCTS_DATA ? JSON.parse(PRODUCTS_DATA.textContent || '[]') : [];
    PRODUCTS.sort(function(a,b) { return a.id.localeCompare(b.id); });

    const listEl=document.getElementById("list");
    const fmt=new Intl.NumberFormat("it-IT",{style:"currency",currency:"EUR"});
    const countEl=document.getElementById("count");
    const q=document.getElementById("searchBox");
    const modal=document.getElementById("modal");
    const mTitle=document.getElementById("mTitle");
    const mDesc=document.getElementById("mDesc");
    const mFullDesc=document.getElementById("mFullDesc");
    const mPrice=document.getElementById("mPrice");
    const mGallery=document.getElementById("mGallery");
    const shareBtn=document.getElementById("shareBtn");
    const closeBtn=document.getElementById("closeBtn");
    let currentId=null;

    function formatPrice(price, unit) {
      var priceText = fmt.format(price);
      if (unit) {
        var unitLower = unit.toString().toLowerCase();
        if (unitLower === '/kg' || unitLower === 'kg') {
            return priceText + ' /kg';
        }
      }
      return priceText;
    }

    function rowTemplate(p) {
      var imgSrc = (p.images && p.images.length > 0 && p.images[0]) ? p.images[0] : 'images/default1.jpg';
      return (
        '<div class="item" onclick="openModal('' + p.id + '')">' +
          '<div class="thumb"><img loading="lazy" src="' + imgSrc + '" alt="' + p.name + '" onerror="this.onerror=null;this.src='images/default1.jpg';"></div>' +
          '<div class="info">' +
            '<h3 class="title">' + p.name + '</h3>' +
            '<p class="desc">' + (p.shortDesc || "") + '</p>' +
            '<div class="divider"></div>' +
          '</div>' +
          '<div class="price">' + formatPrice(p.price, p.unit) + '</div>' +
        '</div>'
      );
    }

    function render(list) {
      list = list || PRODUCTS;
      if (!listEl) return;
      listEl.innerHTML = list.length ? list.map(rowTemplate).join("") : '<div class="item">Nessun risultato</div>';
      if(countEl) {
        countEl.textContent = list.length === PRODUCTS.length ? (list.length + ' prodotti') : (list.length + ' risultati');
      }
    }

    function productAnchorUrl(id) {
      const base = location.origin + location.pathname;
      return base + '#' + encodeURIComponent(id);
    }

    async function shareProduct(id) {
      const p = PRODUCTS.find(function(x) { return x.id === id; });
      if (!p) return;
      const shareText = p.name + ' ‚Äì ' + formatPrice(p.price, p.unit);
      const shareUrl = productAnchorUrl(p.id);
      
      try {
          if (navigator.share) {
              await navigator.share({ title: p.name, text: shareText, url: shareUrl });
              return;
          }
      } catch (e) {
          console.error("Share API failed:", e);
      }
      try {
          await navigator.clipboard.writeText(shareUrl);
          alert('Link del prodotto copiato negli appunti!');
      } catch (e) {
          alert('Impossibile copiare il link.');
      }
    }

    function adjustModalImages() {
      const content = document.querySelector('.modal-content');
      const gallery = document.getElementById('mGallery');
      if (!content || !gallery) return;
      const titleH = document.getElementById('mTitle')?.offsetHeight || 0;
      const descH  = document.getElementById('mDesc')?.offsetHeight || 0;
      const fullH  = document.getElementById('mFullDesc')?.offsetHeight || 0;
      const priceH = document.getElementById('mPrice')?.offsetHeight || 0;
      const footerH= document.querySelector('.modal-footer')?.offsetHeight || 0;
      const paddings = 40;
      const max = content.clientHeight - (titleH + descH + fullH + priceH + footerH + paddings);
      const imgs = gallery.querySelectorAll('img');
      imgs.forEach(function(img) {
          img.style.maxHeight = Math.max(120, max) + 'px';
      });
    }

    window.openModal = function(id) {
      const p = PRODUCTS.find(function(x) { return x.id === id; });
      if (!p) return;
      currentId = id;
      mTitle.textContent = p.name;
      mDesc.textContent = p.shortDesc || "";
      mFullDesc.textContent = p.fullDesc || "";
      mPrice.textContent = formatPrice(p.price, p.unit);
      const imgs = (p.images || []).slice(0, 2);
      mGallery.innerHTML = imgs.map(function(src) {
          var imgSrc = src || 'images/default1.jpg';
          return '<img loading="lazy" src="' + imgSrc + '" alt="' + p.name + '" onerror="this.onerror=null;this.src='images/default.png';">';
      }).join("");
      shareBtn.onclick = function() { shareProduct(currentId); };
      modal.classList.add("open");
      document.body.style.overflow = "hidden";
      if(closeBtn) closeBtn.focus();
      if (location.hash !== "#" + id) {
          history.pushState({ modal: true, id: id }, "", "#" + id);
      }
      setTimeout(adjustModalImages, 0);
    }

    function closeModal() {
      if (!modal || !modal.classList.contains("open")) return;
      modal.classList.remove("open");
      document.body.style.overflow = "";
      currentId = null;
      if (location.hash) {
          history.pushState("", document.title, location.pathname + location.search);
      }
    }

    if(closeBtn) closeBtn.onclick = closeModal;
    if(modal) modal.addEventListener("click", function(e) { if (e.target === modal) closeModal(); });
    window.addEventListener("keydown", function(e) { if (e.key === "Escape") closeModal(); });
    window.addEventListener("popstate", function() {
      if (location.hash) {
          const id = decodeURIComponent(location.hash.slice(1));
          const productExists = PRODUCTS.some(function(p) { return p.id === id; });
          if (modal && !modal.classList.contains("open") && productExists) {
              openModal(id);
          }
      } else {
          if (modal && modal.classList.contains("open")) closeModal();
      }
    });

    if(q) q.addEventListener("input", function() {
      const term = q.value.trim().toLowerCase();
      if (!term) {
          render(PRODUCTS);
          return;
      }
      const res = PRODUCTS.filter(function(p) {
          const hay = [p.name || "", p.shortDesc || "", p.fullDesc || ""].join(" ").toLowerCase();
          return hay.includes(term);
      });
      render(res);
    });

    window.addEventListener('resize', function() { if (modal && modal.classList.contains('open')) adjustModalImages(); });
    
    render();

    if (location.hash) {
      const id = decodeURIComponent(location.hash.slice(1));
      const productExists = PRODUCTS.some(function(p) { return p.id === id; });
      if (productExists) openModal(id);
    }
  });
  </script>
</body>
</html>